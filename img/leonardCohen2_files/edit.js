document.createElement("canvas").getContext||!function(){function a(){return this.context_||(this.context_=new w(this))}function b(a,b,c){var d=P.call(arguments,2);return function(){return a.apply(b,d.concat(P.call(arguments)))}}function c(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function d(a){if(a.namespaces.g_vml_||a.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML"),a.namespaces.g_o_||a.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML"),!a.styleSheets.ex_canvas_){var b=a.createStyleSheet();b.owningElement.id="ex_canvas_",b.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}function e(a){var b=a.srcElement;switch(a.propertyName){case"width":b.getContext().clearRect(),b.style.width=b.attributes.width.nodeValue+"px",b.firstChild.style.width=b.clientWidth+"px";break;case"height":b.getContext().clearRect(),b.style.height=b.attributes.height.nodeValue+"px",b.firstChild.style.height=b.clientHeight+"px"}}function f(a){var b=a.srcElement;b.firstChild&&(b.firstChild.style.width=b.clientWidth+"px",b.firstChild.style.height=b.clientHeight+"px")}function g(){return[[1,0,0],[0,1,0],[0,0,1]]}function i(a,b){for(var c=g(),d=0;d<3;d++)for(var e=0;e<3;e++){for(var f=0,h=0;h<3;h++)f+=a[d][h]*b[h][e];c[d][e]=f}return c}function j(a,b){b.fillStyle=a.fillStyle,b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.lineWidth=a.lineWidth,b.miterLimit=a.miterLimit,b.shadowBlur=a.shadowBlur,b.shadowColor=a.shadowColor,b.shadowOffsetX=a.shadowOffsetX,b.shadowOffsetY=a.shadowOffsetY,b.strokeStyle=a.strokeStyle,b.globalAlpha=a.globalAlpha,b.font=a.font,b.textAlign=a.textAlign,b.textBaseline=a.textBaseline,b.arcScaleX_=a.arcScaleX_,b.arcScaleY_=a.arcScaleY_,b.lineScale_=a.lineScale_}function k(a){var b=a.indexOf("(",3),c=a.indexOf(")",b+1),d=a.substring(b+1,c).split(",");return 4==d.length&&"a"==a.substr(3,1)?alpha=Number(d[3]):d[3]=1,d}function m(a){return parseFloat(a)/100}function n(a,b,c){return Math.min(c,Math.max(b,a))}function o(a){var b,c,d;if(h=parseFloat(a[0])/360%360,h<0&&h++,s=n(m(a[1]),0,1),l=n(m(a[2]),0,1),0==s)b=c=d=l;else{var e=l<.5?l*(1+s):l+s-l*s,f=2*l-e;b=p(f,e,h+1/3),c=p(f,e,h),d=p(f,e,h-1/3)}return"#"+R[Math.floor(255*b)]+R[Math.floor(255*c)]+R[Math.floor(255*d)]}function p(a,b,c){return c<0&&c++,c>1&&c--,6*c<1?a+6*(b-a)*c:2*c<1?b:3*c<2?a+(b-a)*(2/3-c)*6:a}function q(a){var b,c=1;if(a=String(a),"#"==a.charAt(0))b=a;else if(/^rgb/.test(a)){for(var d,e=k(a),b="#",f=0;f<3;f++)d=e[f].indexOf("%")!=-1?Math.floor(255*m(e[f])):Number(e[f]),b+=R[n(d,0,255)];c=e[3]}else if(/^hsl/.test(a)){var e=k(a);b=o(e),c=e[3]}else b=U[a]||a;return{color:b,alpha:c}}function r(a){if(W[a])return W[a];var b=document.createElement("div"),c=b.style;try{c.font=a}catch(d){}return W[a]={style:c.fontStyle||V.style,variant:c.fontVariant||V.variant,weight:c.fontWeight||V.weight,size:c.fontSize||V.size,family:c.fontFamily||V.family}}function t(a,b){var c={};for(var d in a)c[d]=a[d];var e=parseFloat(b.currentStyle.fontSize),f=parseFloat(a.size);return"number"==typeof a.size?c.size=a.size:a.size.indexOf("px")!=-1?c.size=f:a.size.indexOf("em")!=-1?c.size=e*f:a.size.indexOf("%")!=-1?c.size=e/100*f:a.size.indexOf("pt")!=-1?c.size=f/.75:c.size=e,c.size*=.981,c}function u(a){return a.style+" "+a.variant+" "+a.weight+" "+a.size+"px "+a.family}function v(a){switch(a){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function w(a){this.m_=g(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineCap="butt",this.miterLimit=1*N,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic",this.canvas=a;var b=a.ownerDocument.createElement("div");b.style.width=a.clientWidth+"px",b.style.height=a.clientHeight+"px",b.style.overflow="hidden",b.style.position="absolute",a.appendChild(b),this.element_=b,this.arcScaleX_=1,this.arcScaleY_=1,this.lineScale_=1}function x(a,b,c,d){a.currentPath_.push({type:"bezierCurveTo",cp1x:b.x,cp1y:b.y,cp2x:c.x,cp2y:c.y,x:d.x,y:d.y}),a.currentX_=d.x,a.currentY_=d.y}function y(a,b){var c=q(a.strokeStyle),d=c.color,e=c.alpha*a.globalAlpha,f=a.lineScale_*a.lineWidth;f<1&&(e*=f),b.push("<g_vml_:stroke",' opacity="',e,'"',' joinstyle="',a.lineJoin,'"',' miterlimit="',a.miterLimit,'"',' endcap="',v(a.lineCap),'"',' weight="',f,'px"',' color="',d,'" />')}function z(a,b,c,d){var e=a.fillStyle,f=a.arcScaleX_,g=a.arcScaleY_,h=d.x-c.x,i=d.y-c.y;if(e instanceof C){var j=0,k={x:0,y:0},l=0,m=1;if("gradient"==e.type_){var n=e.x0_/f,o=e.y0_/g,p=e.x1_/f,r=e.y1_/g,s=a.getCoords_(n,o),t=a.getCoords_(p,r),u=t.x-s.x,v=t.y-s.y;j=180*Math.atan2(u,v)/Math.PI,j<0&&(j+=360),j<1e-6&&(j=0)}else{var s=a.getCoords_(e.x0_,e.y0_);k={x:(s.x-c.x)/h,y:(s.y-c.y)/i},h/=f*N,i/=g*N;var w=H.max(h,i);l=2*e.r0_/w,m=2*e.r1_/w-l}var x=e.colors_;x.sort(function(a,b){return a.offset-b.offset});for(var y=x.length,z=x[0].color,A=x[y-1].color,B=x[0].alpha*a.globalAlpha,E=x[y-1].alpha*a.globalAlpha,F=[],G=0;G<y;G++){var I=x[G];F.push(I.offset*m+l+" "+I.color)}b.push('<g_vml_:fill type="',e.type_,'"',' method="none" focus="100%"',' color="',z,'"',' color2="',A,'"',' colors="',F.join(","),'"',' opacity="',E,'"',' g_o_:opacity2="',B,'"',' angle="',j,'"',' focusposition="',k.x,",",k.y,'" />')}else if(e instanceof D){if(h&&i){var J=-c.x,K=-c.y;b.push("<g_vml_:fill",' position="',J/h*f*f,",",K/i*g*g,'"',' type="tile"',' src="',e.src_,'" />')}}else{var L=q(a.fillStyle),M=L.color,O=L.alpha*a.globalAlpha;b.push('<g_vml_:fill color="',M,'" opacity="',O,'" />')}}function A(a){return isFinite(a[0][0])&&isFinite(a[0][1])&&isFinite(a[1][0])&&isFinite(a[1][1])&&isFinite(a[2][0])&&isFinite(a[2][1])}function B(a,b,c){if(A(b)&&(a.m_=b,c)){var d=b[0][0]*b[1][1]-b[0][1]*b[1][0];a.lineScale_=M(L(d))}}function C(a){this.type_=a,this.x0_=0,this.y0_=0,this.r0_=0,this.x1_=0,this.y1_=0,this.r1_=0,this.colors_=[]}function D(a,b){switch(F(a),b){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=b;break;default:E("SYNTAX_ERR")}this.src_=a.src,this.width_=a.width,this.height_=a.height}function E(a){throw new G(a)}function F(a){a&&1==a.nodeType&&"IMG"==a.tagName||E("TYPE_MISMATCH_ERR"),"complete"!=a.readyState&&E("INVALID_STATE_ERR")}function G(a){this.code=this[a],this.message=a+": DOM Exception "+this.code}var H=Math,I=H.round,J=H.sin,K=H.cos,L=H.abs,M=H.sqrt,N=10,O=N/2,P=Array.prototype.slice;d(document);var Q={init:function(a){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var c=a||document;c.createElement("canvas"),c.attachEvent("onreadystatechange",b(this.init_,this,c))}},init_:function(a){for(var b=a.getElementsByTagName("canvas"),c=0;c<b.length;c++)this.initElement(b[c])},initElement:function(b){if(!b.getContext){b.getContext=a,d(b.ownerDocument),b.innerHTML="",b.attachEvent("onpropertychange",e),b.attachEvent("onresize",f);var c=b.attributes;c.width&&c.width.specified?b.style.width=c.width.nodeValue+"px":b.width=b.clientWidth,c.height&&c.height.specified?b.style.height=c.height.nodeValue+"px":b.height=b.clientHeight}return b}};Q.init();for(var R=[],S=0;S<16;S++)for(var T=0;T<16;T++)R[16*S+T]=S.toString(16)+T.toString(16);var U={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"},V={style:"normal",variant:"normal",weight:"normal",size:10,family:"sans-serif"},W={},X=w.prototype;X.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},X.beginPath=function(){this.currentPath_=[]},X.moveTo=function(a,b){var c=this.getCoords_(a,b);this.currentPath_.push({type:"moveTo",x:c.x,y:c.y}),this.currentX_=c.x,this.currentY_=c.y},X.lineTo=function(a,b){var c=this.getCoords_(a,b);this.currentPath_.push({type:"lineTo",x:c.x,y:c.y}),this.currentX_=c.x,this.currentY_=c.y},X.bezierCurveTo=function(a,b,c,d,e,f){var g=this.getCoords_(e,f),h=this.getCoords_(a,b),i=this.getCoords_(c,d);x(this,h,i,g)},X.quadraticCurveTo=function(a,b,c,d){var e=this.getCoords_(a,b),f=this.getCoords_(c,d),g={x:this.currentX_+2/3*(e.x-this.currentX_),y:this.currentY_+2/3*(e.y-this.currentY_)},h={x:g.x+(f.x-this.currentX_)/3,y:g.y+(f.y-this.currentY_)/3};x(this,g,h,f)},X.arc=function(a,b,c,d,e,f){c*=N;var g=f?"at":"wa",h=a+K(d)*c-O,i=b+J(d)*c-O,j=a+K(e)*c-O,k=b+J(e)*c-O;h!=j||f||(h+=.125);var l=this.getCoords_(a,b),m=this.getCoords_(h,i),n=this.getCoords_(j,k);this.currentPath_.push({type:g,x:l.x,y:l.y,radius:c,xStart:m.x,yStart:m.y,xEnd:n.x,yEnd:n.y})},X.rect=function(a,b,c,d){this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath()},X.strokeRect=function(a,b,c,d){var e=this.currentPath_;this.beginPath(),this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath(),this.stroke(),this.currentPath_=e},X.fillRect=function(a,b,c,d){var e=this.currentPath_;this.beginPath(),this.moveTo(a,b),this.lineTo(a+c,b),this.lineTo(a+c,b+d),this.lineTo(a,b+d),this.closePath(),this.fill(),this.currentPath_=e},X.createLinearGradient=function(a,b,c,d){var e=new C("gradient");return e.x0_=a,e.y0_=b,e.x1_=c,e.y1_=d,e},X.createRadialGradient=function(a,b,c,d,e,f){var g=new C("gradientradial");return g.x0_=a,g.y0_=b,g.r0_=c,g.x1_=d,g.y1_=e,g.r1_=f,g},X.drawImage=function(a,b){var c,d,e,f,g,h,i,j,k=a.runtimeStyle.width,l=a.runtimeStyle.height;a.runtimeStyle.width="auto",a.runtimeStyle.height="auto";var m=a.width,n=a.height;if(a.runtimeStyle.width=k,a.runtimeStyle.height=l,3==arguments.length)c=arguments[1],d=arguments[2],g=h=0,i=e=m,j=f=n;else if(5==arguments.length)c=arguments[1],d=arguments[2],e=arguments[3],f=arguments[4],g=h=0,i=m,j=n;else{if(9!=arguments.length)throw Error("Invalid number of arguments");g=arguments[1],h=arguments[2],i=arguments[3],j=arguments[4],c=arguments[5],d=arguments[6],e=arguments[7],f=arguments[8]}var o=this.getCoords_(c,d),p=[],q=10,r=10;if(p.push(" <g_vml_:group",' coordsize="',N*q,",",N*r,'"',' coordorigin="0,0"',' style="width:',q,"px;height:",r,"px;position:absolute;"),1!=this.m_[0][0]||this.m_[0][1]||1!=this.m_[1][1]||this.m_[1][0]){var s=[];s.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",I(o.x/N),",","Dy=",I(o.y/N),"");var t=o,u=this.getCoords_(c+e,d),v=this.getCoords_(c,d+f),w=this.getCoords_(c+e,d+f);t.x=H.max(t.x,u.x,v.x,w.x),t.y=H.max(t.y,u.y,v.y,w.y),p.push("padding:0 ",I(t.x/N),"px ",I(t.y/N),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",s.join(""),", sizingmethod='clip');")}else p.push("top:",I(o.y/N),"px;left:",I(o.x/N),"px;");p.push(' ">','<g_vml_:image src="',a.src,'"',' style="width:',N*e,"px;"," height:",N*f,'px"',' cropleft="',g/m,'"',' croptop="',h/n,'"',' cropright="',(m-g-i)/m,'"',' cropbottom="',(n-h-j)/n,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",p.join(""))},X.stroke=function(a){for(var b=10,c=10,d=5e3,e={x:null,y:null},f={x:null,y:null},g=0;g<this.currentPath_.length;g+=d){var h=[];h.push("<g_vml_:shape",' filled="',!!a,'"',' style="position:absolute;width:',b,"px;height:",c,'px;"',' coordorigin="0,0"',' coordsize="',N*b,",",N*c,'"',' stroked="',!a,'"',' path="');for(var i=g;i<Math.min(g+d,this.currentPath_.length);i++){i%d==0&&i>0&&h.push(" m ",I(this.currentPath_[i-1].x),",",I(this.currentPath_[i-1].y));var j,k=this.currentPath_[i];switch(k.type){case"moveTo":j=k,h.push(" m ",I(k.x),",",I(k.y));break;case"lineTo":h.push(" l ",I(k.x),",",I(k.y));break;case"close":h.push(" x "),k=null;break;case"bezierCurveTo":h.push(" c ",I(k.cp1x),",",I(k.cp1y),",",I(k.cp2x),",",I(k.cp2y),",",I(k.x),",",I(k.y));break;case"at":case"wa":h.push(" ",k.type," ",I(k.x-this.arcScaleX_*k.radius),",",I(k.y-this.arcScaleY_*k.radius)," ",I(k.x+this.arcScaleX_*k.radius),",",I(k.y+this.arcScaleY_*k.radius)," ",I(k.xStart),",",I(k.yStart)," ",I(k.xEnd),",",I(k.yEnd))}k&&((null==e.x||k.x<e.x)&&(e.x=k.x),(null==f.x||k.x>f.x)&&(f.x=k.x),(null==e.y||k.y<e.y)&&(e.y=k.y),(null==f.y||k.y>f.y)&&(f.y=k.y))}h.push(' ">'),a?z(this,h,e,f):y(this,h),h.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",h.join(""))}},X.fill=function(){this.stroke(!0)},X.closePath=function(){this.currentPath_.push({type:"close"})},X.getCoords_=function(a,b){var c=this.m_;return{x:N*(a*c[0][0]+b*c[1][0]+c[2][0])-O,y:N*(a*c[0][1]+b*c[1][1]+c[2][1])-O}},X.save=function(){var a={};j(this,a),this.aStack_.push(a),this.mStack_.push(this.m_),this.m_=i(g(),this.m_)},X.restore=function(){this.aStack_.length&&(j(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},X.translate=function(a,b){var c=[[1,0,0],[0,1,0],[a,b,1]];B(this,i(c,this.m_),!1)},X.rotate=function(a){var b=K(a),c=J(a),d=[[b,c,0],[-c,b,0],[0,0,1]];B(this,i(d,this.m_),!1)},X.scale=function(a,b){this.arcScaleX_*=a,this.arcScaleY_*=b;var c=[[a,0,0],[0,b,0],[0,0,1]];B(this,i(c,this.m_),!0)},X.transform=function(a,b,c,d,e,f){var g=[[a,b,0],[c,d,0],[e,f,1]];B(this,i(g,this.m_),!0)},X.setTransform=function(a,b,c,d,e,f){var g=[[a,b,0],[c,d,0],[e,f,1]];B(this,g,!0)},X.drawText_=function(a,b,d,e,f){var g=this.m_,h=1e3,i=0,j=h,k={x:0,y:0},l=[],m=t(r(this.font),this.element_),n=u(m),o=this.element_.currentStyle,p=this.textAlign.toLowerCase();switch(p){case"left":case"center":case"right":break;case"end":p="ltr"==o.direction?"right":"left";break;case"start":p="rtl"==o.direction?"right":"left";break;default:p="left"}switch(this.textBaseline){case"hanging":case"top":k.y=m.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":k.y=-m.size/2.25}switch(p){case"right":i=h,j=.05;break;case"center":i=j=h/2}var q=this.getCoords_(b+k.x,d+k.y);l.push('<g_vml_:line from="',-i,' 0" to="',j,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!f,'" stroked="',!!f,'" style="position:absolute;width:1px;height:1px;">'),f?y(this,l):z(this,l,{x:-i,y:0},{x:j,y:m.size});var s=g[0][0].toFixed(3)+","+g[1][0].toFixed(3)+","+g[0][1].toFixed(3)+","+g[1][1].toFixed(3)+",0,0",v=I(q.x/N)+","+I(q.y/N);l.push('<g_vml_:skew on="t" matrix="',s,'" ',' offset="',v,'" origin="',i,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',c(a),'" style="v-text-align:',p,";font:",c(n),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",l.join(""))},X.fillText=function(a,b,c,d){this.drawText_(a,b,c,d,!1)},X.strokeText=function(a,b,c,d){this.drawText_(a,b,c,d,!0)},X.measureText=function(a){if(!this.textMeasureEl_){var b='<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>';this.element_.insertAdjacentHTML("beforeEnd",b),this.textMeasureEl_=this.element_.lastChild}var c=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(c.createTextNode(a)),{width:this.textMeasureEl_.offsetWidth}},X.clip=function(){},X.arcTo=function(){},X.createPattern=function(a,b){return new D(a,b)},C.prototype.addColorStop=function(a,b){b=q(b),this.colors_.push({offset:a,color:b.color,alpha:b.alpha})};var Y=G.prototype=new Error;Y.INDEX_SIZE_ERR=1,Y.DOMSTRING_SIZE_ERR=2,Y.HIERARCHY_REQUEST_ERR=3,Y.WRONG_DOCUMENT_ERR=4,Y.INVALID_CHARACTER_ERR=5,Y.NO_DATA_ALLOWED_ERR=6,Y.NO_MODIFICATION_ALLOWED_ERR=7,Y.NOT_FOUND_ERR=8,Y.NOT_SUPPORTED_ERR=9,Y.INUSE_ATTRIBUTE_ERR=10,Y.INVALID_STATE_ERR=11,Y.SYNTAX_ERR=12,Y.INVALID_MODIFICATION_ERR=13,Y.NAMESPACE_ERR=14,Y.INVALID_ACCESS_ERR=15,Y.VALIDATION_ERR=16,Y.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=Q,CanvasRenderingContext2D=w,CanvasGradient=C,CanvasPattern=D,DOMException=G}();try{Image.prototype.maxDimentions=function(a,b){var c=1;this.width>a&&(c=a/this.width,this.width*=c,this.height*=c),this.height>b&&(c=b/this.height,this.width*=c,this.height*=c)}}catch(e){}jQuery.fn.rotate=function(a,b){var c=this.get(0);if(b?c.angle=a:c.angle=((void 0==c.angle?0:c.angle)+a)%360,c.angle>=0)var d=Math.PI*c.angle/180;else var d=Math.PI*(360+c.angle)/180;var e=Math.cos(d),f=Math.sin(d),g=document.createElement("canvas");c.oImage?g.oImage=c.oImage:(g.oImage=new Image,g.oImage.src=c.src),$.browser.msie&&(90==a||270==a?g.oImage.maxDimentions(300,471):g.oImage.maxDimentions(471,300)),g.style.width=g.width=Math.abs(e*g.oImage.width)+Math.abs(f*g.oImage.height),g.style.height=g.height=Math.abs(e*g.oImage.height)+Math.abs(f*g.oImage.width);var h=g.getContext("2d");h.save(),d<=Math.PI/2?h.translate(f*g.oImage.height,0):d<=Math.PI?h.translate(g.width,-e*g.oImage.height):d<=1.5*Math.PI?h.translate(-e*g.oImage.width,g.height):h.translate(0,-f*g.oImage.width),h.rotate(d),h.drawImage(g.oImage,0,0,g.oImage.width,g.oImage.height),h.restore(),g.id=c.id,g.angle=c.angle,c.parentNode.replaceChild(g,c)},jQuery.fn.rotateRight=function(a){this.rotate(void 0==a?90:a)},jQuery.fn.rotateLeft=function(a){this.rotate(void 0==a?-90:-a)},function(a){a.Jcrop=function(b,c){function d(a){return""+parseInt(a)+"px"}function e(a){return""+parseInt(a)+"%"}function f(a){return K.baseClass+"-"+a}function g(b){var c=a(b).offset();return[c.left,c.top]}function j(a){return[a.pageX-ea[0],a.pageY-ea[1]]}function k(a){a!=X&&(ha.setCursor(a),X=a)}function l(a,b){if(ea=g(M),ha.setCursor("move"==a?a:a+"-resize"),"move"==a)return ha.activateHandlers(n(b),s);var c=fa.getFixed(),d=o(a),e=fa.getCorner(o(d));fa.setPressed(fa.getCorner(d)),fa.setCurrent(e),ha.activateHandlers(m(a,c),s)}function m(a,b){return function(c){if(K.aspectRatio)switch(a){case"e":c[1]=b.y+1;break;case"w":c[1]=b.y+1;break;case"n":c[0]=b.x+1;break;case"s":c[0]=b.x+1}else switch(a){case"e":c[1]=b.y2;break;case"w":c[1]=b.y2;break;case"n":c[0]=b.x2;break;case"s":c[0]=b.x2}fa.setCurrent(c),ga.update()}}function n(a){var b=a;return ia.watchKeys(),function(a){fa.moveOffset([a[0]-b[0],a[1]-b[1]]),b=a,ga.update()}}function o(a){switch(a){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function p(a){return function(b){return!K.disabled&&(!("move"==a&&!K.allowMove)&&(W=!0,l(a,j(b)),b.stopPropagation(),b.preventDefault(),!1))}}function q(a,b,c){var d=a.width(),e=a.height();d>b&&b>0&&(d=b,e=b/a.width()*a.height()),e>c&&c>0&&(e=c,d=c/a.height()*a.width()),U=a.width()/d,V=a.height()/e,a.width(d).height(e)}function r(a){return{x:parseInt(a.x*U),y:parseInt(a.y*V),x2:parseInt(a.x2*U),y2:parseInt(a.y2*V),w:parseInt(a.w*U),h:parseInt(a.h*V)}}function s(a){var b=fa.getFixed();b.w>K.minSelect[0]&&b.h>K.minSelect[1]?(ga.enableHandles(),ga.done()):ga.release(),ha.setCursor(K.allowSelect?"crosshair":"default")}function t(a){if(K.disabled)return!1;if(!K.allowSelect)return!1;W=!0,ea=g(M),ga.disableHandles(),k("crosshair");var b=j(a);return fa.setPressed(b),ha.activateHandlers(u,s),ia.watchKeys(),ga.update(),a.stopPropagation(),a.preventDefault(),!1}function u(a){fa.setCurrent(a),ga.update()}function v(){var b=a("<div></div>").addClass(f("tracker"));return a.browser.msie&&b.css({opacity:0,backgroundColor:"white"}),b}function x(a){function b(){window.setTimeout(s,j)}var c=a[0]/U,d=a[1]/V,e=a[2]/U,f=a[3]/V;if(!Y){var g=fa.flipCoords(c,d,e,f),h=fa.getFixed(),i=initcr=[h.x,h.y,h.x2,h.y2],j=K.animationDelay,k=i[0],l=i[1],e=i[2],f=i[3],m=g[0]-initcr[0],n=g[1]-initcr[1],o=g[2]-initcr[2],p=g[3]-initcr[3],q=0,r=K.swingSpeed;ga.animMode(!0);var s=function(){return function(){q+=(100-q)/r,i[0]=k+q/100*m,i[1]=l+q/100*n,i[2]=e+q/100*o,i[3]=f+q/100*p,q<100?b():ga.done(),q>=99.8&&(q=100),z(i)}}();b()}}function y(a){z([a[0]/U,a[1]/V,a[2]/U,a[3]/V])}function z(a){fa.setPressed([a[0],a[1]]),fa.setCurrent([a[2],a[3]]),ga.update()}function A(b){"object"!=typeof b&&(b={}),K=a.extend(K,b),"function"!=typeof K.onChange&&(K.onChange=function(){}),"function"!=typeof K.onSelect&&(K.onSelect=function(){})}function B(){return r(fa.getFixed())}function C(){return fa.getFixed()}function D(a){A(a),I()}function E(){K.disabled=!0,ga.disableHandles(),ga.setCursor("default"),ha.setCursor("default")}function F(){K.disabled=!1,I()}function G(){ga.done(),ha.activateHandlers(null,null)}function H(){P.remove(),L.show()}function I(a){K.allowResize?a?ga.enableOnly():ga.enableHandles():ga.disableHandles(),ha.setCursor(K.allowSelect?"crosshair":"default"),ga.setCursor(K.allowMove?"move":"default"),P.css("backgroundColor",K.bgColor),"setSelect"in K&&(y(c.setSelect),ga.done(),delete K.setSelect),"trueSize"in K&&(U=K.trueSize[0]/N,V=K.trueSize[1]/O),Q=K.maxSize[0]||0,R=K.maxSize[1]||0,S=K.minSize[0]||0,T=K.minSize[1]||0,"outerImage"in K&&(M.attr("src",K.outerImage),delete K.outerImage),ga.refresh()}var b=b,c=c;"object"!=typeof b&&(b=a(b)[0]),"object"!=typeof c&&(c={}),"trackDocument"in c||(c.trackDocument=!a.browser.msie,a.browser.msie&&"8"==a.browser.version.split(".")[0]&&(c.trackDocument=!0)),"keySupport"in c||(c.keySupport=!a.browser.msie);var J={trackDocument:!1,baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,borderOpacity:.4,handleOpacity:.5,handlePad:5,handleSize:9,handleOffset:5,edgeMargin:14,aspectRatio:0,keySupport:!0,cornerHandles:!0,sideHandles:!0,drawBorders:!0,dragEdges:!0,boxWidth:0,boxHeight:0,boundary:8,animationDelay:20,swingSpeed:3,allowSelect:!0,allowMove:!0,allowResize:!0,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){}},K=J;A(c);var L=a(b),M=L.clone().removeAttr("id").css({position:"absolute"});M.width(L.width()),M.height(L.height()),M.css("display","block"),L.after(M).hide(),q(M,K.boxWidth,K.boxHeight);var N=M.width(),O=M.height(),P=a("<div />").width(N).height(O).addClass(f("holder")).css({position:"relative",backgroundColor:K.bgColor}).insertAfter(L).append(M);K.addClass&&P.addClass(K.addClass);var Q,R,S,T,U,V,W,X,Y,Z,$=a("<img />").attr("src",M.attr("src")).css("position","absolute").width(N).height(O),_=a("<div />").width(e(100)).height(e(100)).css({zIndex:310,position:"absolute",overflow:"hidden"}).append($),aa=a("<div />").width(e(100)).height(e(100)).css("zIndex",320),ba=a("<div />").css({position:"absolute",zIndex:300}).insertBefore(M).append(_,aa),ca=K.boundary,da=v().width(N+2*ca).height(O+2*ca).css({position:"absolute",top:d(-ca),left:d(-ca),zIndex:290}).mousedown(t),ea=g(M),fa=function(){function a(a){var a=g(a);p=n=a[0],q=o=a[1]}function b(a){var a=g(a);l=a[0]-p,m=a[1]-q,p=a[0],q=a[1]}function c(){return[l,m]}function d(a){var b=a[0],c=a[1];0>n+b&&(b-=b+n),0>o+c&&(c-=c+o),O<q+c&&(c+=O-(q+c)),N<p+b&&(b+=N-(p+b)),n+=b,p+=b,o+=c,q+=c}function e(a){var b=f();switch(a){case"ne":return[b.x2,b.y];case"nw":return[b.x,b.y];case"se":return[b.x2,b.y2];case"sw":return[b.x,b.y2]}}function f(){if(!K.aspectRatio)return j();var a,b,c=K.aspectRatio,d=K.minSize[0]/U,e=(K.minSize[1]/V,K.maxSize[0]/U),f=K.maxSize[1]/V,g=p-n,l=q-o,m=Math.abs(g),r=Math.abs(l),s=m/r;return 0==e&&(e=10*N),0==f&&(f=10*O),s<c?(b=q,w=r*c,a=g<0?n-w:w+n,a<0?(a=0,h=Math.abs((a-n)/c),b=l<0?o-h:h+o):a>N&&(a=N,h=Math.abs((a-n)/c),b=l<0?o-h:h+o)):(a=p,h=m/c,b=l<0?o-h:o+h,b<0?(b=0,w=Math.abs((b-o)*c),a=g<0?n-w:w+n):b>O&&(b=O,w=Math.abs(b-o)*c,a=g<0?n-w:w+n)),a>n?(a-n<d?a=n+d:a-n>e&&(a=n+e),b=b>o?o+(a-n)/c:o-(a-n)/c):a<n&&(n-a<d?a=n-d:n-a>e&&(a=n-e),b=b>o?o+(n-a)/c:o-(n-a)/c),a<0?(n-=a,a=0):a>N&&(n-=a-N,a=N),b<0?(o-=b,b=0):b>O&&(o-=b-O,b=O),last=k(i(n,o,a,b))}function g(a){return a[0]<0&&(a[0]=0),a[1]<0&&(a[1]=0),a[0]>N&&(a[0]=N),a[1]>O&&(a[1]=O),[a[0],a[1]]}function i(a,b,c,d){var e=a,f=c,g=b,h=d;return c<a&&(e=c,f=a),d<b&&(g=d,h=b),[Math.round(e),Math.round(g),Math.round(f),Math.round(h)]}function j(){var a=p-n,b=q-o;if(Q&&Math.abs(a)>Q&&(p=a>0?n+Q:n-Q),R&&Math.abs(b)>R&&(q=b>0?o+R:o-R),T&&Math.abs(b)<T&&(q=b>0?o+T:o-T),S&&Math.abs(a)<S&&(p=a>0?n+S:n-S),n<0&&(p-=n,n-=n),o<0&&(q-=o,o-=o),p<0&&(n-=p,p-=p),q<0&&(o-=q,q-=q),p>N){var c=p-N;n-=c,p-=c}if(q>O){var c=q-O;o-=c,q-=c}if(n>N){var c=n-O;q-=c,o-=c}if(o>O){var c=o-O;q-=c,o-=c}return k(i(n,o,p,q))}function k(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var l,m,n=0,o=0,p=0,q=0;return{flipCoords:i,setPressed:a,setCurrent:b,getOffset:c,moveOffset:d,getCorner:e,getFixed:f}}(),ga=function(){function b(b){var c=a("<div />").css({position:"absolute",opacity:K.borderOpacity}).addClass(f(b));return _.append(c),c}function c(b,c){var d=a("<div />").mousedown(p(b)).css({cursor:b+"-resize",position:"absolute",zIndex:c});return aa.append(d),d}function g(a){return c(a,B++).css({top:d(-F+1),left:d(-F+1),opacity:K.handleOpacity}).addClass(f("handle"))}function h(a){var b=K.handleSize,f=F,g=b,h=b,i=f,j=f;switch(a){case"n":case"s":h=e(100);break;case"e":case"w":g=e(100)}return c(a,B++).width(h).height(g).css({top:d(-i+1),left:d(-j+1)})}function j(a){for(i in a)D[a[i]]=g(a[i])}function k(a){var b=Math.round(a.h/2-F),c=Math.round(a.w/2-F),e=(west=-F+1,a.w-F),f=a.h-F;"e"in D&&D.e.css({top:d(b),left:d(e)})&&D.w.css({top:d(b)})&&D.s.css({top:d(f),left:d(c)})&&D.n.css({left:d(c)}),"ne"in D&&D.ne.css({left:d(e)})&&D.se.css({top:d(f),left:d(e)})&&D.sw.css({top:d(f)}),"b"in D&&D.b.css({top:d(f)})&&D.r.css({left:d(e)})}function l(a,b){$.css({top:d(-b),left:d(-a)}),ba.css({top:d(b),left:d(a)})}function m(a,b){ba.width(a).height(b)}function n(){var a=fa.getFixed();fa.setPressed([a.x,a.y]),fa.setCurrent([a.x2,a.y2]),o()}function o(){if(A)return q()}function q(){var a=fa.getFixed();m(a.w,a.h),l(a.x,a.y),K.drawBorders&&C.right.css({left:d(a.w-1)})&&C.bottom.css({top:d(a.h-1)}),E&&k(a),A||s(),K.onChange(r(a))}function s(){ba.show(),M.css("opacity",K.bgOpacity),A=!0}function t(){x(),ba.hide(),M.css("opacity",1),A=!1}function u(){E&&(k(fa.getFixed()),aa.show())}function w(){if(E=!0,K.allowResize)return k(fa.getFixed()),aa.show(),!0}function x(){E=!1,aa.hide()}function y(a){(Y=a)?x():w()}function z(){y(!1),n()}var A,B=370,C={},D={},E=!1,F=K.handleOffset;K.drawBorders&&(C={top:b("hline").css("top",d(a.browser.msie?-1:0)),bottom:b("hline"),left:b("vline"),right:b("vline")}),K.dragEdges&&(D.t=h("n"),D.b=h("s"),D.r=h("e"),D.l=h("w")),K.sideHandles&&j(["n","s","e","w"]),K.cornerHandles&&j(["sw","nw","ne","se"]);var G=v().mousedown(p("move")).css({cursor:"move",position:"absolute",zIndex:360});return _.append(G),x(),{updateVisible:o,update:q,release:t,refresh:n,setCursor:function(a){G.css("cursor",a)},enableHandles:w,enableOnly:function(){E=!0},showHandles:u,disableHandles:x,animMode:y,done:z}}(),ha=function(){function b(){da.css({zIndex:450}),k&&a(document).mousemove(d).mouseup(e)}function c(){da.css({zIndex:290}),k&&a(document).unbind("mousemove",d).unbind("mouseup",e)}function d(a){h(j(a))}function e(a){return a.preventDefault(),a.stopPropagation(),W&&(W=!1,i(j(a)),K.onSelect(r(fa.getFixed())),c(),h=function(){},i=function(){}),!1}function f(a,c){return W=!0,h=a,i=c,b(),!1}function g(a){da.css("cursor",a)}var h=function(){},i=function(){},k=K.trackDocument;return k||da.mousemove(d).mouseup(e).mouseout(e),M.before(da),{activateHandlers:f,setCursor:g}}(),ia=function(){function b(){K.keySupport&&(f.show(),f.focus())}function c(a){f.hide()}function d(a,b,c){K.allowMove&&(fa.moveOffset([b,c]),ga.updateVisible()),a.preventDefault(),a.stopPropagation()}function e(a){if(a.ctrlKey)return!0;Z=!!a.shiftKey;var b=Z?10:1;switch(a.keyCode){case 37:d(a,-b,0);break;case 39:d(a,b,0);break;case 38:d(a,0,-b);break;case 40:d(a,0,b);break;case 27:ga.release();break;case 9:return!0}return nothing(a)}var f=a('<input type="radio" />').css({position:"absolute",left:"-30px"}).keypress(e).blur(c),g=a("<div />").css({position:"absolute",overflow:"hidden"}).append(f);return K.keySupport&&g.insertBefore(M),{watchKeys:b}}();aa.hide(),I(!0);var ja={animateTo:x,setSelect:y,setOptions:D,tellSelect:B,tellScaled:C,disable:E,enable:F,cancel:G,focus:ia.watchKeys,getBounds:function(){return[N*U,O*V]},getWidgetSize:function(){return[N,O]},release:ga.release,destroy:H};return L.data("Jcrop",ja),ja},a.fn.Jcrop=function(b){function c(c){var d=b.useImg||c.src,e=new Image;e.onload=function(){a.Jcrop(c,b)},e.src=d}return"object"!=typeof b&&(b={}),this.each(function(){if(a(this).data("Jcrop")){if("api"==b)return a(this).data("Jcrop");a(this).data("Jcrop").setOptions(b)}else c(this)}),this}}(jQuery),ImgurEdit=function(a){var b={imageWidth:0,imageHeight:0,host:"imgur.com",action:"crop",processURL:"/edit/process",imageid:null,hash:null,cdnUrl:"//i.imgur.com",albumId:""},c={APIKey:"5704d7468a505cb52d51e2f00cc075c7",APIVersion:3,cropSizes:["Original",["Square","1:1"],"Custom","320x240","640x480","800x600","1280x1024","1600x1200","240x320","480x640","600x800","1024x1280","1200x1600","3:2","3:5","4:3","4:6","5:7","8:10","16:9"],openType:"inject",tools:"draw,text,orientation,crop,redeye,whiten,blemish,enhance,effects,brightness,contrast,saturation,sharpness,stickers",noCloseButton:!0},d={image:$("#image"),advancedLoader:$("#advanced-loader"),redirecting:$("#redirecting"),saveButton:$("#save"),applyButton:$("#apply-crop"),resetButton:$("#reset-crop"),cropButtons:$("#crop-buttons"),cropDimensions:$("#crop-dimensions"),imageTableTD:$("#image-table td"),loader:$("#loader"),submitButton:$("#submit"),rotateImage1:$("#angle1"),rotateImage2:$("#angle2"),rotateImage3:$("#angle3"),rotateImage4:$("#angle4"),rotateImages:$("#rotate-images"),orientation:$("#orientation"),hugeOkButton:$("#huge-ok"),hugeMessageID:"#huge-message",advancedCookie:"imgur_advanced_editor"},e={widthInput:$("#width"),heightInput:$("#height"),lockedCheckbox:$("#locked"),locked:!0},f={aspectRatio:1,maxWidth:950,maxRotateWidth:471,
maxRotateHeight:300,hugeWidth:2e3,maxResizeWidth:3e3,maxResizeHeight:3e3},g={success:"Image was edited successfully"},h=null,i=function(){d.loader.show()},j=function(){d.loader.hide()},k=function(){Imgur.Util.jafoLog({event:"editImageSaved",meta:{hash:b.hash}}),d.submitButton.click(),humanMsg.displayMsg(g.success)},l=function(a){var b=a.which?a.which:event.keyCode;return!(b>31&&(b<48||b>57))},m=function(a){i(),d.cropDimensions.hide();$("<img/>").attr({src:a+"&random="+Math.ceil(1e16*Math.random()),id:"img"}).load(function(){if(u(this.width,this.height),this.width>f.maxWidth){f.aspectRatio=this.width/f.maxWidth;var a=f.maxWidth/this.width;this.width*=a,this.height*=a}else f.aspectRatio=1;j(),d.imageTableTD.empty().append(this),r(this)})},n=function(){m(b.processURL+"?imageid="+b.imageid+"&a=reset")},o=function(){var a=h.tellSelect();a.w*=f.aspectRatio,a.h*=f.aspectRatio,a.x*=f.aspectRatio,a.y*=f.aspectRatio;var c=a.w>>0,d=a.h>>0,e=a.x>>0,g=a.y>>0;return c>0&&d>0&&b.processURL+"?imageid="+b.imageid+"&a=crop&x="+e+"&y="+g+"&w="+c+"&h="+d},p=function(){var a=o();a&&m(a)},q=function(){d.applyButton.click(p),d.resetButton.click(n),d.saveButton.click(function(){i();var a=h.tellSelect();a.w>0&&a.h>0?$.get(o(),function(){k()}):k()}),m(b.processURL+"?imageid="+b.imageid+"&"+1e16*Math.random())},r=function(a){null!=h&&h.release(),h=$.Jcrop(a,{bgColor:"transparent",bgOpacity:1,onChange:s})},s=function(a){a.w=Math.round(a.w*f.aspectRatio),a.h=Math.round(a.h*f.aspectRatio),0==a.w&&0==a.h?($(".jcrop-holder").css({backgroundColor:"transparent"}),$(".jcrop-holder > img").css("opacity","1"),d.cropDimensions.is(":hidden")||d.cropDimensions.hide()):($(".jcrop-holder").css({backgroundColor:"black"}),$(".jcrop-holder > img").css("opacity","0.5"),d.cropDimensions.is(":hidden")&&d.cropDimensions.show()),d.cropDimensions.text(a.w+"x"+a.h)},t=function(){e.widthInput.keypress(l),e.heightInput.keypress(l),e.widthInput.change(w),e.heightInput.change(v),e.lockedCheckbox.change(y)},u=function(a,c){b.imageWidth=a,b.imageHeight=c,e.widthInput.val(a),e.heightInput.val(c)},v=function(){var a=parseInt(e.widthInput.val()),c=parseInt(e.heightInput.val());c>f.maxResizeHeight&&(c=f.maxResizeHeight,e.heightInput.val(c)),e.locked&&e.widthInput.val(Math.round(a*(c/b.imageHeight))),x()},w=function(){var a=parseInt(e.widthInput.val()),c=parseInt(e.heightInput.val());a>f.maxResizeWidth&&(a=f.maxResizeWidth,e.widthInput.val(a)),e.locked&&e.heightInput.val(Math.round(c*(a/b.imageWidth))),x()},x=function(){var a=e.widthInput.val(),c=e.heightInput.val();b.imageHeight=c,b.imageWidth=a,m(b.processURL+"?imageid="+b.imageid+"&a=resize&w="+a+"&h="+c)},y=function(){e.locked=void 0!==$("#locked:checked").val()},z=function(){i();var a=new Image;a.src=b.cdnUrl+"/"+b.hash+".jpg?"+Math.random(),$(a).load(function(){var a=this.cloneNode(!0),b=this.cloneNode(!0),c=this.cloneNode(!0);d.rotateImage1.html(this),d.rotateImage2.html(a),d.rotateImage3.html(b),d.rotateImage4.html(c),$(this).rotateRight(0),$(a).rotateRight(90),$(b).rotateRight(180),$(c).rotateRight(270),A(d.rotateImage1),j()}),d.rotateImage1.click(function(){A(this,1)}),d.rotateImage2.click(function(){A(this,2)}),d.rotateImage3.click(function(){A(this,3)}),d.rotateImage4.click(function(){A(this,4)}),d.saveButton.click(function(){k()})},A=function(a,b){B(),C(b),$(a).parent().addClass("selected"),$(a).parent().prepend("<div class=selection></div>")},B=function(){$(".selection").remove(),d.rotateImages.find("td div").removeClass("selected")},C=function(a){d.orientation.val(a)},D=function(){$.cookie(d.advancedCookie)||$.colorbox({href:d.hugeMessageID,open:!0,inline:!0,width:400,height:130,transition:"none",onOpen:function(){$("#avpw_holder").css("visibility","hidden")},onClosed:function(){$("#avpw_holder").css("visibility","visible"),$.cookie(d.advancedCookie,!0)}})},E=function(a,b){return a.replace(new RegExp("[?&]"+b+"=[^&#]*(#.*)?$"),"$1").replace(new RegExp("([?&])"+b+"=[^&]*&"),"$1")},F=function(){Feather_OnSave=function(a,c){d.advancedLoader.show(),d.redirecting.show(),$("#avpw_holder").hide(),$.post(document.location.href,{submit:c,album_id:b.albumId},function(){humanMsg.displayMsg(g.success),setTimeout(function(){window.location=E(window.location.href,"deletehash")},1e3)})},Feather_OnLoad=function(){_featherLoaded=!0,d.advancedLoader.hide(),launchEditor(d.image.attr("id")),d.saveButton.click(function(){featherEditor.save()})},featherEditor=new Aviary.Feather({apiKey:c.APIKey,apiVersion:c.APIVersion,tools:c.tools,appendTo:"content",cropPresets:c.cropSizes,noCloseButton:c.noCloseButton,openType:c.openType,maxSize:999999,minimumStyling:!0,onLoad:Feather_OnLoad,onSave:Feather_OnSave}),_featherLoaded=!1,launchEditor=function(a){if(_featherLoaded){b.imageWidth>f.hugeWidth&&D();var c=document.getElementById(a).src;return featherEditor.launch({image:a,url:c}),!1}}};this.init=function(){"crop"==b.action?(q(),t()):"rotate"==b.action?z():"advanced"==b.action&&F()},$.extend(b,a)};
//# sourceMappingURL=edit.js.map